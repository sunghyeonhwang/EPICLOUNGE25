<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì–¸ë¦¬ì–¼ í˜ìŠ¤íŠ¸ ì„œìš¸ 2025 ì°¸ê°€ í™•ì¸ì¦</title>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;700;800;900&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    .certificate-container {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 90vh;
      background: #f5f5f5;
      padding: 20px;
      font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    }

    .certificate {
      position: relative;
      width: 600px;
      /* height: 800px; */
      background: linear-gradient(135deg, rgba(0, 25, 90, 1) 0%, rgba(57, 3, 99, 1) 100%);
      overflow: hidden;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
      -webkit-print-color-adjust: exact !important;
      color-adjust: exact !important;
      print-color-adjust: exact !important;
    }

    .certificate::before {
      content: '';
      position: absolute;
      top: -27px;
      left: -21px;
      width: 557.56px;
      height: 627.55px;
      background-size: cover;
      opacity: 0.3;
    }

    .certificate-content {
      position: relative;
      background: white;
      width: 560px;
      height: 66vh;
      margin: 100px auto;
      border-radius: 4px;
      padding: 40px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .logo-section {
      position: absolute;
      top: -106px;
      left: 0;
      width: 162.23px;
      height: 96.96px;
      padding: 10px;
      border-radius: 4px;
    }

    .logo-unreal {
      width: 18.8px;
      height: 18.47px;
      margin-bottom: 8px;
    }

    .logo-text {
      font-size: 14px;
      font-weight: 600;
      color: #000;
      margin-bottom: 8px;
    }

    .date-info {
      font-size: 10px;
      color: #000;
      line-height: 1.2;
    }

    .title {
      font-size: 40px;
      font-weight: 900;
      color: #000;
      text-align: center;
      margin-bottom: 50px;
      margin-top: 20px;
    }

    .participant-info {
      align-self: flex-start;
      margin-bottom: 70px;
    }

    .info-row {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      font-size: 22px;
      font-weight: 800;
      color: #000;
    }

    .info-label {
      min-width: 80px;
    }

    .info-input {
      border: none;
      /* border-bottom: 2px solid #000; */
      background: transparent;
      font-size: 22px;
      font-weight: 800;
      padding: 5px 10px;
      margin-left: 10px;
      min-width: 200px;
      color: #000;
      font-family: inherit;
    }

    .info-input:focus {
      outline: none;
      /* border-bottom-color: #2D42DD; */
    }

    .confirmation-text {
      text-align: center;
      font-size: 20px;
      font-weight: 500;
      color: #000;
      line-height: 1.5;
      letter-spacing: -0.05em;
      margin-bottom: 40px;
    }

    .event-details {
      font-size: 15px;
      font-weight: 500;
      color: #000;
      line-height: 1.67;
      letter-spacing: -0.03em;
      margin-bottom: 20px;
    }

    .organizer {
      font-size: 20px;
      font-weight: 700;
      color: #000;
      text-align: center;
      margin-bottom: 80px;
    }

    .signature-section {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      width: 100%;
      /* height: 220px; */
      /* gap: 20px; */
    }

    .fest-logo {
      width: 100%;
      height: 100%;
      background-image: url('https://unrealsummit16.cafe24.com/2025/unrealfest2025/fest_logo.svg');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
    }

    .epic-logo {
      width: 150px;
      /* ë” í¬ê²Œ */
      height: 150px;
    }

    .signature {
      justify-content: center;
      /* ì¤‘ì•™ ë°°ì¹˜ */
      /* ë˜ëŠ” */
      justify-content: flex-start;
      /* ì™¼ìª½ ë°°ì¹˜ */

      background: #f0f0f0;
      background-image: url('https://unrealsummit16.cafe24.com/2025/unrealfest2025/epic_logo.svg');
      background-size: cover;
    }

    .controls {
      margin-top: 30px;
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: inherit;
    }

    .btn-primary {
      background: linear-gradient(135deg, #2D42DD, #AF47F6);
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      /* box-shadow: 0 8px 20px rgba(45, 66, 221, 0.3); */
    }

    .btn-secondary {
      background: white;
      color: #2D42DD;
      /* border: 2px solid #2D42DD; */
    }

    .btn-secondary:hover {
      background: #2D42DD;
      color: white;
    }

    @media (max-width: 768px) {
      .certificate {
        width: 90vw;
        height: auto;
        aspect-ratio: 3/4;
      }

      .certificate-content {
        width: 85%;
        height: auto;
        padding: 20px;
      }

      .title {
        font-size: 28px;
        margin-bottom: 30px;
      }

      .info-row {
        font-size: 18px;
      }

      .info-input {
        font-size: 18px;
        min-width: 150px;
      }

      .confirmation-text {
        font-size: 16px;
      }

      @media print {
        .controls {
          display: none !important;
        }
      }
  </style>
</head>

<body>
  <div class="certificate-container">
    <div>
      <div class="certificate" id="certificate">


        <div class="certificate-content">
          <div class="logo-section">
            <div class="fest-logo"></div>
          </div>
          <h1 class="title">ì°¸ê°€í™•ì¸ì¦</h1>

          <div class="participant-info">
            <div class="info-row">
              <span class="info-label">ì†Œì† :</span>
              <input type="text" class="info-input" id="company" placeholder="ì†Œì†ì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            <div class="info-row">
              <span class="info-label">ì„±ëª… :</span>
              <input type="text" class="info-input" id="name" placeholder="ì„±ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>
          </div>

          <div class="confirmation-text">
            ìœ„ ì‚¬ëŒì€ ì—í”½ê²Œì„ì¦ˆ ì½”ë¦¬ì•„ì—ì„œ ì£¼ê´€í•˜ëŠ”<br>
            ì–¸ë¦¬ì–¼ í˜ìŠ¤íŠ¸ ì„œìš¸ 2025ì— ì°¸ê°€í–ˆìŒì„ í™•ì¸í•©ë‹ˆë‹¤.
          </div>

          <div class="event-details">
            ì¼ì‹œ : 2025ë…„ 8ì›” 25ì¼ ~ 26ì¼<br>
            ì¥ì†Œ : ì½”ì—‘ìŠ¤ ê·¸ëœë“œ ë³¼ë£¸ 1ì¸µ<br>
            ì£¼ìµœ : ì—í”½ê²Œì„ì¦ˆ ì½”ë¦¬ì•„
          </div>

          <div class="organizer"><img src="https://unrealsummit16.cafe24.com/2025/unrealfest2025/sign_ufs.svg" alt="ì–¸ë¦¬ì–¼ í˜ìŠ¤íŠ¸ ì„œìš¸ 2025 ì‚¬ë¬´êµ­" style="max-width: 240px; height: auto;" /></div>
          <div class="signature-section">
            <div class="epic-logo">&nbsp;</div>
          </div>
        </div>

      </div>


    </div>
  </div>
  <div class=" controls">
    <!-- <button class="btn btn-primary" onclick="generateCertificate()">í™•ì¸ì¦ ìƒì„±</button> -->
    <!-- <button class="btn btn-secondary" onclick="downloadCertificate()">ë‹¤ìš´ë¡œë“œ</button> -->
    <button class="btn btn-secondary" onclick="printCertificate()">ì¸ì‡„</button>
  </div>
  <script>
    // ì²´í¬ì¸ ì‹œìŠ¤í…œê³¼ ì—°ë™ë  í•¨ìˆ˜
    function loadParticipantData(participantData) {
      if (participantData.company) {
        document.getElementById('company').value = participantData.company;
      }
      if (participantData.name) {
        document.getElementById('name').value = participantData.name;
      }
    }

    // í™•ì¸ì¦ ìƒì„± (ì²´í¬ì¸ ì™„ë£Œ í›„ í˜¸ì¶œë  í•¨ìˆ˜)
    function generateCertificate() {
      const name = document.getElementById('name').value.trim();
      const company = document.getElementById('company').value.trim();

      if (!name) {
        alert('ì„±ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
        document.getElementById('name').focus();
        return;
      }

      // ì…ë ¥ í•„ë“œë¥¼ ì½ê¸° ì „ìš©ìœ¼ë¡œ ë³€ê²½
      document.getElementById('name').readOnly = true;
      document.getElementById('company').readOnly = true;

      // ì‹œê°ì  í”¼ë“œë°±
      const certificate = document.getElementById('certificate');
      certificate.style.transform = 'scale(1.02)';
      certificate.style.transition = 'transform 0.3s ease';

      setTimeout(() => {
        certificate.style.transform = 'scale(1)';
        alert(`${name}ë‹˜ì˜ ì°¸ê°€ í™•ì¸ì¦ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰`);
      }, 300);
    }

    // ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥
    function downloadCertificate() {
      const name = document.getElementById('name').value.trim();
      if (!name) {
        alert('ë¨¼ì € í™•ì¸ì¦ì„ ìƒì„±í•´ì£¼ì„¸ìš”!');
        return;
      }

      // html2canvas ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜
      // ì„œë²„ì‚¬ì´ë“œì—ì„œ PDF ìƒì„±í•˜ëŠ” ë¡œì§ êµ¬í˜„
      alert('ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ì´ ê³§ ì¶”ê°€ë  ì˜ˆì •ì…ë‹ˆë‹¤!');
    }

    // ì¸ì‡„ ê¸°ëŠ¥
    function printCertificate() {
      const name = document.getElementById('name').value.trim();
      if (!name) {
        alert('ë¨¼ì € í™•ì¸ì¦ì„ ìƒì„±í•´ì£¼ì„¸ìš”!');
        return;
      }

      window.print();
    }

    // API ì—°ë™ ì˜ˆì‹œ (ì²´í¬ì¸ ì‹œìŠ¤í…œê³¼ ì—°ë™)
    async function checkParticipantStatus(participantId) {
      try {
        // ì‹¤ì œ API ì—”ë“œí¬ì¸íŠ¸ë¡œ êµì²´
        const response = await fetch(`/api/participants/${participantId}/check-in`);
        const data = await response.json();

        if (data.checkedIn) {
          loadParticipantData(data);
          generateCertificate();
        } else {
          alert('ì²´í¬ì¸ì´ ì™„ë£Œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
        }
      } catch (error) {
        console.error('ì²´í¬ì¸ ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜:', error);
      }
    }

    // URL íŒŒë¼ë¯¸í„°ì—ì„œ ì°¸ê°€ì ì •ë³´ ë¡œë”© - ë””ë²„ê¹… í¬í•¨
    window.addEventListener('DOMContentLoaded', () => {
      console.log('í˜ì´ì§€ ë¡œë“œë¨, URL íŒŒë¼ë¯¸í„° í™•ì¸ ì¤‘...');
      console.log('í˜„ì¬ URL:', window.location.href);

      const urlParams = new URLSearchParams(window.location.search);
      const name = urlParams.get('name');
      const company = urlParams.get('company');

      console.log('URL íŒŒë¼ë¯¸í„°:', {
        name,
        company
      });

      const nameInput = document.getElementById('name');
      const companyInput = document.getElementById('company');

      if (name && name.trim() !== '') {
        console.log('ì´ë¦„ ì„¤ì •:', name);
        nameInput.value = decodeURIComponent(name);
        nameInput.style.backgroundColor = '#fff';
        nameInput.style.border = '0px solid #2D42DD';
        nameInput.readOnly = true;
      }

      if (company && company.trim() !== '') {
        console.log('ì†Œì† ì„¤ì •:', company);
        companyInput.value = decodeURIComponent(company);
        companyInput.style.backgroundColor = '#fff';
        companyInput.style.border = '0px solid #2D42DD';
        companyInput.readOnly = true;
      }

      // URL íŒŒë¼ë¯¸í„°ê°€ ìˆìœ¼ë©´ ìë™ìœ¼ë¡œ í™•ì¸ì¦ ìƒì„±
      if (name && name.trim() !== '') {
        console.log('ìë™ í™•ì¸ì¦ ìƒì„± ì‹œì‘');
        setTimeout(() => {
          generateCertificate();
        }, 800);
      }

      // ë””ë²„ê¹…ìš© ì •ë³´ í‘œì‹œ

    });

    // epiclounge.co.krì—ì„œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ì „ì—­ í•¨ìˆ˜
    window.loadEpicloungeData = function(userData) {
      if (userData.apply_user_name) {
        document.getElementById('name').value = userData.apply_user_name;
        document.getElementById('name').readOnly = true;
      }
      if (userData.apply_user_company) {
        document.getElementById('company').value = userData.apply_user_company;
        document.getElementById('company').readOnly = true;
      }

      // ìë™ìœ¼ë¡œ í™•ì¸ì¦ ìƒì„±
      setTimeout(() => {
        generateCertificate();
      }, 300);
    };
  </script>
</body>

</html>